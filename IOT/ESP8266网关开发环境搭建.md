# ESP8266网关开发环境搭建

目标：

- 一体化开发环境的安装
- 一体化开发环境的使用
- ESP系列模组的固件烧录

## ESP8266网关简介

ESP8266网关是由NodeMcu、ESP12x、ESP8266芯片组成的。NodeMcu是一个开源的WIFI开发平台，如下图所示：

![image](https://raw.githubusercontent.com/zhusheng/blog/master/iot/23.png)

该平台是基于ESP-12x模块构建的，上图中红色方框所示。根据版本以及生产厂商不同ESP-12x可能是ESP-12、ESP-12E、ESP-12F或者ESP-12N模块。

![image](https://raw.githubusercontent.com/zhusheng/blog/master/iot/24.png)

上图所示的就是ESP-12E模块，`该模块是基于ESP8266芯片开发的`。图中红色方框所示即为ESP8266芯片。WIFI模块厂商基于ESP8266芯片生产ESP-12E模块，开发板厂商基于ESP-12E模块生产NodeMcu开发平台。接下来我们就来依次了解下ESP-12E模块（包含ESP8266芯片）、NodeMcu开发平台。

### ESP-12E模块

ESP-12E WiFi 模块是由安信可科技开发的，该模块核心处理器 ESP8266 在较小尺寸封装中集成了业界领先的 Tensilica L106 超低功耗 32 位微型 MCU，带有 16 位精简模式，主频支持 80 MHz 和 160 MHz，支持 RTOS，集成 Wi-Fi MAC/ BB/RF/PA/LNA，板载天线。   该模块支持标准的 IEEE802.11 b/g/n 协议，完整的 TCP/IP 协议栈。

用户可以使用该模块为现有的设备添加联网功能，也可以构建独立的网络控制。ESP8266 是高性能无线 SOC，以最低成本提供最大实用性，为 WiFi 功能嵌入其他系统提供无限可能。

ESP8266EX 是一个完整且自成体系的 WiFi网络解决方案，能够独立运行，也可以作为从机搭载于其他主机 MCU 运行。ESP8266EX 在搭载应用并作为设备中唯一的应用处理器时，能够直接从外接闪存中启动。内置的高速缓冲存储器有利于提高系统性能，并减少内存需求，结构图如下所示：

![image](https://raw.githubusercontent.com/zhusheng/blog/master/iot/25.png)

（1）ESP8266EX的特点：

- 802.11 b/g/n
- 内置Tensilica L106 超低功耗 32 位微型 MCU，主频支持 80 MHz 和160 MHz，支持 RTOS
- 内置10 bit高精度ADC
- 内置TCP/IP协议栈  
- 内置TR 开关、balun、LNA、功率放大器和匹配网络  
- 内置PLL、稳压器和电源管理组件，802.11b 模式下+20 dBm的输出功率
- A-MPDU 、 A-MSDU 的聚合和 0.4 s的保护间隔  
- WiFi @ 2.4 GHz，支持 WPA/WPA2 安全模式
- 支持AT远程升级及云端OTA升级  
- 支持 STA/AP/STA+AP 工作模式  
- 支持 Smart Config 功能（包括 Android 和 iOS 设备）
- HSPI 、UART、I2C、I2S、IR Remote Control、PWM、GPIO  
- 深度睡眠保持电流为 10 uA，关断电流小于 5 uA
- 2ms之内唤醒、连接并传递数据包
- 待机状态消耗功率小于1.0 mW (DTIM3)
- 工作温度范围：-40℃- 125℃

（2）ESP12E模组的主要参数

如下图所示：

![image](https://raw.githubusercontent.com/zhusheng/blog/master/iot/26.png)

（3）ESP-12E 接口定义

ESP-12E共接出 22 个接口，如下所示：

![image](https://raw.githubusercontent.com/zhusheng/blog/master/iot/27.png)

（4）功能描述

ESP8266EX内置Tensilica L106 超低功耗 32 位微型MCU，带有 16 位精简模式，主频支持 80 MHz 和160 MHz，支持 RTOS。目前 WiFi 协议栈只用了20%的 MIPS，其他的都可以用来做应用开发。MCU 可通过以下接口和芯片其他部分协同工作：

- 连接存储控制器、也可以用来访问外接闪存的编码 RAM/ROM 接口 (iBus)
- 同样连接存储控制器的数据 RAM 接口 (dBus)
- 访问寄存器的 AHB 接口

（5）内存描述

SP8266EX 芯片本身内置了存储控制器，包含ROM和SRAM。MCU可以通过 iBus、dBus 和 AHB 接口访问存储控制器。这些接口都可以访问ROM或RAM单元，存储仲裁器以到达顺序确定运行顺序。基于目前我司Demo SDK的使用SRAM 情况，用户可用剩余SRAM空间为：RAM size < 36kB(station模式下，连上路由后，heap+data区大致可用36KB左右。

### NodeMcu

NodeMcu是基于乐鑫ESP8266的NodeMcu开发板，具有GPIO、PWM、I2C、1-Wire、ADC等功能，结合NodeMcu固件为您的原型开发提供最快速的途径。

NodeMcu是超简单的物联网开发平台，一款开源快速硬件平台，包括固件和开发板，用几行简单的Lua脚本就能开发物联网应用。

NodeMcu具有开源、交互式、可编程、低成本、简单、智能、WIFI硬件等特点。

NodeMcu是像Arduino一样操作的硬件IO。提供硬件的高级接口，可以将应用开发者从繁复的硬件配置、寄存器操作中解放出来。用交互式Lua脚本，像arduino一样编写硬件代码！

NodeMcu是用Nodejs类似语法写网络应用的。事件驱动型API极大的方便了用户进行网络应用开发，使用类似Nodejs的方式编写网络代码，并运行于5mm*5mm大小的MCU之上，加快物联网开发进度。

NodeMcu是用于快速原型的开发板，集成了ESP8266芯片。提供了性价比更高的物联网应用开发平台。

硬件ESP8266网关就介绍到这里，我们需要获取软件开发工具包，简称“SDK”，这里我们选用的是ESP8266ESP8266 NONOS SDK。接下来，我们开始下载ESP8266ESP8266 NONOS SDK。

### 下载ESP8266 NONOS SDK

百度搜索框输入“乐鑫”点击如下图选择,选择左下方`产品->ESP8266/ESP8285芯片`,选择`资源->SDK和演示->ESP8266 NONOS SDK V2.1.0 20170505`,点击下载，如下图所示。

![image](https://raw.githubusercontent.com/zhusheng/blog/master/iot/28.png)

![image](https://raw.githubusercontent.com/zhusheng/blog/master/iot/29.png)

## 一体化开发环境安装

ESP8266官方发布的SDK是基于Linux操作系统的开发工具包，需要具有一定的Linux基础。为了方便开发，降低门槛，安信可（ESP8266模块厂家）推出了ESP系列一体化开发环境，该开发环境是基于Windows + Cygwin + Eclipse + GCC的综合IDE环境，有效降低了开发的难度，简化了Windows操作系统下开发环境的设置。

[百度网盘下载链接](https://pan.baidu.com/s/18zxKtN3WwWE70qof1xsYQA)
